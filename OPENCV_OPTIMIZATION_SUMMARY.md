# OpenCV –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è - –†–µ–∑—é–º–µ

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞

**–ü—Ä–æ–±–ª–µ–º–∞**: OpenCV –∑–∞–≥—Ä—É–∂–∞–ª—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –∑–∞–º–µ–¥–ª—è–ª —Ä–∞–±–æ—Ç—É Gemini –≤ –æ–±–ª–∞—á–Ω–æ–π –≤–µ—Ä—Å–∏–∏.

**–†–µ—à–µ–Ω–∏–µ**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ OpenCV —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤—ã–≥—Ä—É–∑–∫–æ–π.

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- ‚ùå OpenCV –∑–∞–≥—Ä—É–∂–∞–ª—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ `main.py`
- ‚ùå –ó–∞–Ω–∏–º–∞–ª ~50-100 MB –ø–∞–º—è—Ç–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ
- ‚ùå –ú–æ–≥ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É Gemini
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç AI —Å–µ—Ä–≤–∏—Å–∞

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- ‚úÖ OpenCV –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ —Ñ–æ—Ç–æ
- ‚úÖ –ü–∞–º—è—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ Gemini —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç AI —Å–µ—Ä–≤–∏—Å–∞

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`utils/opencv_lazy_loader.py`** - –õ–µ–Ω–∏–≤—ã–π –∑–∞–≥—Ä—É–∑—á–∏–∫ OpenCV
2. **`utils/receipt_analyzer_optimized.py`** - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä
3. **`test_opencv_optimization.py`** - –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
4. **`OPENCV_OPTIMIZATION_GUIDE.md`** - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`utils/receipt_analyzer.py`** - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
2. **`handlers/photo_handler.py`** - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
3. **`main.py`** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ OpenCV –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏

## üìä –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```
üîç OpenCV –¥–æ—Å—Ç—É–ø–µ–Ω: True
üìä –ü–∞–º—è—Ç—å –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ OpenCV: 112.12 MB
üìà –ü—Ä–∏—Ä–æ—Å—Ç –ø–∞–º—è—Ç–∏ OpenCV: 6.30 MB
‚úÖ OpenCV –≤—ã–≥—Ä—É–∂–µ–Ω –∏–∑ –ø–∞–º—è—Ç–∏
üìâ –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ –ø–∞–º—è—Ç–∏: -0.42 MB
üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞: pro
üìà –ü—Ä–∏—Ä–æ—Å—Ç –ø–∞–º—è—Ç–∏: 5.01 MB
```

## üí° –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
```python
# OpenCV –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ
cv2 = get_opencv()
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–≥—Ä—É–∑–∫–∞
```python
# OpenCV –≤—ã–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
unload_opencv()
```

### –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞/–≤—ã–≥—Ä—É–∑–∫–∞
with OpenCVContext() as cv2:
    # OpenCV –¥–æ—Å—Ç—É–ø–µ–Ω –∑–¥–µ—Å—å
    pass
# OpenCV –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–≥—Ä—É–∂–∞–µ—Ç—Å—è
```

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –æ–±–ª–∞—á–Ω–æ–π –≤–µ—Ä—Å–∏–∏

1. **–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** - OpenCV –ù–ï –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
2. **–ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ç–æ** - OpenCV –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
3. **–ü–æ—Å–ª–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–æ–¥–µ–ª–∏** - OpenCV –≤—ã–≥—Ä—É–∂–∞–µ—Ç—Å—è
4. **–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ Gemini** - OpenCV –Ω–µ –º–µ—à–∞–µ—Ç

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- üöÄ **–ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç Gemini** - –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
- üíæ **–≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏** - OpenCV –Ω–µ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–∞–º—è—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ
- üîß **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - graceful fallback –µ—Å–ª–∏ OpenCV –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- üîÑ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å—Ç–∞—Ä—ã–π –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
python test_opencv_optimization.py
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∑–∞–≥—Ä—É–∑–∫—É/–≤—ã–≥—Ä—É–∑–∫—É OpenCV:
```
üîç –ó–∞–≥—Ä—É–∂–∞–µ–º OpenCV –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è...
‚úÖ OpenCV –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ
üßπ –í—ã–≥—Ä—É–∂–∞–µ–º OpenCV –∏–∑ –ø–∞–º—è—Ç–∏...
‚úÖ OpenCV –≤—ã–≥—Ä—É–∂–µ–Ω –∏–∑ –ø–∞–º—è—Ç–∏
```

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è OpenCV —É—Å–ø–µ—à–Ω–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç Gemini –≤ –æ–±–ª–∞—á–Ω–æ–π –≤–µ—Ä—Å–∏–∏. OpenCV —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏ –Ω–µ –º–µ—à–∞–µ—Ç —Ä–∞–±–æ—Ç–µ AI —Å–µ—Ä–≤–∏—Å–∞.


